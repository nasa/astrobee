-- Copyright (c) 2017, United States Government, as represented by the
-- Administrator of the National Aeronautics and Space Administration.
--
-- All rights reserved.
--
-- The Astrobee platform is licensed under the Apache License, Version 2.0
-- (the "License"); you may not use this file except in compliance with the
-- License. You may obtain a copy of the License at
--
--     http://www.apache.org/licenses/LICENSE-2.0
--
-- Unless required by applicable law or agreed to in writing, software
-- distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
-- WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
-- License for the specific language governing permissions and limitations
-- under the License.

-- Autogenerated from FMECA! DO NOT CHANGE!

require "management/fault_functions"

subsystems={
  {name="behaviors", nodes={
    {name="arm", faults={
      {id=22, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Arm", heartbeat={timeout_sec=1.1, misses=2.0}},
      {id=61, warning=false, blocking=false, response=command("unloadNodelet", "arm", ""), key="INITIALIZATION_FAILED", description="Arm Initialization Failed"},
    }},
  }},
  {name="management", nodes={
    {name="all", faults={
      {id=85, warning=false, blocking=false, response=command("noOp"), key="UNKNOWN_FAULT_KEY", description="Unknown Fault Key"},
    }},
    {name="access_control", faults={
      {id=31, warning=false, blocking=true, response=command("fault"), key="HEARTBEAT_MISSING", description="No Heartbeat from Access Control", heartbeat={timeout_sec=1.1, misses=3.0}},
      {id=70, warning=false, blocking=true, response=command("unloadNodelet", "access_control", ""), key="INITIALIZATION_FAILED", description="Access Control Initialization Failed"},
    }},
    {name="executive", faults={
      {id=29, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Executive", heartbeat={timeout_sec=2.1, misses=2.0}},
      {id=68, warning=false, blocking=false, response=command("unloadNodelet", "executive", ""), key="INITIALIZATION_FAILED", description="Executive Initialization Failed"},
    }},
    {name="data_bagger", faults={
      {id=47, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Data Bagger", heartbeat={timeout_sec=1.1, misses=1.0}},
      {id=83, warning=false, blocking=false, response=command("unloadNodelet", "data_bagger", ""), key="INITIALIZATION_FAILED", description="Data Bagger Initialization Failed"},
    }},
    {name="llp_cpu_mem_monitor", faults={
      {id=33, warning=false, blocking=true, response=command("stopAllMotion"), key="HEARTBEAT_MISSING", description="No Heartbeat from LLP CPU Monitor", heartbeat={timeout_sec=1.1, misses=2.0}},
      {id=72, warning=false, blocking=true, response=command("unloadNodelet", "llp_cpu_mem_monitor", ""), key="INITIALIZATION_FAILED", description="LLP CPU Monitor Initialization Failed"},
      {id=86, warning=true, blocking=true, response=command("stopAllMotion"), key="LOAD_TOO_HIGH", description="LLP CPU load too high"},
      {id=97, warning=true, blocking=false, response=command("noOp"), key="MEMORY_USAGE_TOO_HIGH", description="LLP Memory usage too high"},
      {id=100, warning=true, blocking=true, response=command("stopAllMotion"), key="TEMPERATURE_TOO_HIGH", description="LLP Temperature too high"},
    }},
    {name="llp_disk_monitor", faults={
      {id=36, warning=false, blocking=true, response=command("fault"), key="HEARTBEAT_MISSING", description="No Heartbeat from LLP Disk Monitor", heartbeat={timeout_sec=1.1, misses=2.0}},
      {id=75, warning=false, blocking=true, response=command("unloadNodelet", "llp_disk_monitor", ""), key="INITIALIZATION_FAILED", description="LLP Disk Monitor Initialization Failed"},
      {id=89, warning=true, blocking=false, response=command("noOp"), key="DISK_CONFIG_INVALID", description="LLP Disk conifg not valid"},
      {id=91, warning=true, blocking=false, response=command("noOp"), key="DISK_USAGE_HIGH", description="LLP Disk usage getting high"},
      {id=94, warning=false, blocking=true, response=command("fault"), key="DISK_USAGE_TOO_HIGH", description="LLP Disk usage too high"},
    }},
    {name="image_sampler", faults={
      {id=42, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Image Sampler", heartbeat={timeout_sec=1.1, misses=5.0}},
      {id=81, warning=false, blocking=false, response=command("unloadNodelet", "image_sampler", ""), key="INITIALIZATION_FAILED", description="Image Sampler Initialization Failed"},
    }},
    {name="mlp_disk_monitor", faults={
      {id=37, warning=false, blocking=true, response=command("fault"), key="HEARTBEAT_MISSING", description="No Heartbeat from MLP Disk Monitor", heartbeat={timeout_sec=1.1, misses=2.0}},
      {id=76, warning=false, blocking=true, response=command("unloadNodelet", "mlp_disk_monitor", ""), key="INITIALIZATION_FAILED", description="MLP Disk Monitor Initialization Failed"},
      {id=90, warning=true, blocking=false, response=command("noOp"), key="DISK_CONFIG_INVALID", description="MLP Disk config not valid"},
      {id=92, warning=true, blocking=false, response=command("noOp"), key="DISK_USAGE_HIGH", description="MLP Disk usage getting high"},
      {id=95, warning=false, blocking=true, response=command("fault"), key="DISK_USAGE_TOO_HIGH", description="MLP Disk usage too high"},
    }},
    {name="mlp_cpu_mem_monitor", faults={
      {id=34, warning=false, blocking=true, response=command("stopAllMotion"), key="HEARTBEAT_MISSING", description="No Heartbeat from MLP CPU Monitor", heartbeat={timeout_sec=1.1, misses=2.0}},
      {id=73, warning=false, blocking=true, response=command("unloadNodelet", "mlp_cpu_monitor", ""), key="INITIALIZATION_FAILED", description="MLP CPU Monitor Initialization Failed"},
      {id=87, warning=true, blocking=true, response=command("stopAllMotion"), key="LOAD_TOO_HIGH", description="MLP CPU load too high"},
      {id=98, warning=true, blocking=false, response=command("noOp"), key="MEMORY_USAGE_TOO_HIGH", description="MLP Memory usage too high"},
      {id=101, warning=true, blocking=true, response=command("stopAllMotion"), key="TEMPERATURE_TOO_HIGH", description="MLP Temperature too high"},
    }},
  }},
  {name="avionics", nodes={
    {name="sys_monitor", faults={
      {id=105, warning=true, blocking=false, response=command("noOp"), key="TIME_DIFF_TOO_HIGH", description="Time difference between mlp and llp too high"},
    }},
  }},
  {name="localization", nodes={
    {name="optical_flow_nodelet", faults={
      {id=27, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from VisualOdometer", heartbeat={timeout_sec=1.1, misses=2.0}},
    }},
    {name="marker_tracking", faults={
      {id=25, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from DockLoc (ar tags)", heartbeat={timeout_sec=1.1, misses=4.0}},
    }},
    {name="localization_node", faults={
      {id=24, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from NavLoc (sparse mapping)", heartbeat={timeout_sec=1.1, misses=4.0}},
    }},
    {name="handrail_detect", faults={
      {id=26, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from PerchLoc (handrail detect)", heartbeat={timeout_sec=1.1, misses=4.0}},
    }},
    {name="localization_manager", faults={
      {id=23, warning=false, blocking=true, response=command("idlePropulsion"), key="HEARTBEAT_MISSING", description="No Heartbeat from Localization Manager", heartbeat={timeout_sec=1.1, misses=2.0}},
      {id=62, warning=false, blocking=true, response=command("unloadNodelet", "localization_manager", ""), key="INITIALIZATION_FAILED", description="Localization Manager Initialization Failed"},
      {id=117, warning=false, blocking=false, response=command("stopAllMotion"), key="LOCALIZATION_PIPELINE_UNSTABLE", description="Localization pipeline is not producing registration or features."},
      {id=119, warning=false, blocking=true, response=command("idlePropulsion"), key="ESTIMATE_CONFIDENCE_TOO_LOW", description="Estimator confidence too low for too long"},
    }},
  }},
  {name="communication", nodes={
    {name="dds_ros_bridge", faults={
      {id=32, warning=false, blocking=false, response=command("fault"), key="HEARTBEAT_MISSING", description="No Heartbeat form DDS ROS Bridge", heartbeat={timeout_sec=1.1, misses=5.0}},
      {id=71, warning=false, blocking=false, response=command("unloadNodelet", "dds_ros_bridge", ""), key="INITIALIZATION_FAILED", description="DDS ROS Bridge Initialization Failed"},
    }},
  }},
  {name="mobility", nodes={
    {name="mapper", faults={
      {id=41, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Mapper", heartbeat={timeout_sec=1.1, misses=2.0}},
      {id=80, warning=false, blocking=false, response=command("unloadNodelet", "mapper", ""), key="INITIALIZATION_FAILED", description="Mapper Initialization Failed"},
    }},
    {name="planner_qp", faults={
      {id=39, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from QP Planner", heartbeat={timeout_sec=1.1, misses=5.0}},
      {id=78, warning=false, blocking=false, response=command("unloadNodelet", "planner_qp", ""), key="INITIALIZATION_FAILED", description="QP Planner Initialization Failed"},
    }},
    {name="planner_trapezoidal", faults={
      {id=40, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Trapezoidal Planner", heartbeat={timeout_sec=1.1, misses=5.0}},
      {id=79, warning=false, blocking=false, response=command("unloadNodelet", "planner_trapezoidal", ""), key="INITIALIZATION_FAILED", description="Trapezoidal Planner Initialization Failed"},
    }},
    {name="choreographer", faults={
      {id=28, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Choreographer", heartbeat={timeout_sec=1.1, misses=1.0}},
      {id=67, warning=false, blocking=false, response=command("unloadNodelet", "choreographer", ""), key="INITIALIZATION_FAILED", description="Choreographer Initialization Failed"},
    }},
  }},
  {name="hardware", nodes={
    {name="laser", faults={
      {id=44, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Laser", heartbeat={timeout_sec=1.1, misses=1.0}},
    }},
    {name="eps_driver", faults={
      {id=11, warning=false, blocking=true, response=command("stopAllMotion"), key="HEARTBEAT_MISSING", description="No Heartbeat from EPS", heartbeat={timeout_sec=1.1, misses=1.0}},
    }},
    {name="perching_arm", faults={
      {id=21, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Perching Arm", heartbeat={timeout_sec=1.1, misses=2.0}},
      {id=60, warning=false, blocking=false, response=command("unloadNodelet", "perching_arm", ""), key="INITIALIZATION_FAILED", description="Perching Arm Initialization Failed"},
    }},
    {name="framestore", faults={
      {id=43, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from FrameStore", heartbeat={timeout_sec=1.1, misses=3.0}},
      {id=82, warning=false, blocking=false, response=command("unloadNodelet", "framestore", ""), key="INITIALIZATION_FAILED", description="Frame Store Initialization Failed"},
    }},
    {name="pmc_actuator", faults={
      {id=13, warning=false, blocking=false, response=command("idlePropulsion"), key="HEARTBEAT_MISSING", description="No Heartbeat from PMC Actuator", heartbeat={timeout_sec=1.1, misses=1.0}},
    }},
    {name="flashlight_front", faults={
      {id=45, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Front Flashlight", heartbeat={timeout_sec=1.1, misses=1.0}},
    }},
    {name="nav_cam", faults={
      {id=18, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Navcam", heartbeat={timeout_sec=1.1, misses=1.0}},
    }},
    {name="flashlight_aft", faults={
      {id=46, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Aft Flashlight", heartbeat={timeout_sec=1.1, misses=1.0}},
    }},
    {name="pico_driver", faults={
      {id=20, warning=false, blocking=false, response=command("stopAllMotion"), key="HEARTBEAT_MISSING", description="No Heartbeat from PicoFlexx", heartbeat={timeout_sec=1.1, misses=1.0}},
      {id=59, warning=false, blocking=false, response=command("unloadNodelet", "pico_driver", ""), key="INITIALIZATION_FAILED", description="PicoFlexx Initialization Failed"},
      {id=124, warning=false, blocking=false, response=command("stop"), key="NO_COMMUNICATION_HAZCAM", description="Unable to communicate with the Hazcam"},
    }},
    {name="dock_cam", faults={
      {id=19, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Dockcam", heartbeat={timeout_sec=1.1, misses=1.0}},
    }},
  }},
  {name="gnc", nodes={
    {name="ctl", faults={
      {id=14, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Control", heartbeat={timeout_sec=1.1, misses=1.0}},
      {id=53, warning=false, blocking=false, response=command("unloadNodelet", "ctl", ""), key="INITIALIZATION_FAILED", description="Control Initialization Failed"},
      {id=133, warning=false, blocking=false, response=command("noOp"), key="KINETIC_ENERGY_INCREASING", description="Kinetic energy increasing in stopping mode"},
    }},
    {name="ekf", faults={
      {id=15, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from EKF", heartbeat={timeout_sec=1.1, misses=1.0}},
      {id=54, warning=false, blocking=false, response=command("unloadNodelet", "ekf", ""), key="INITIALIZATION_FAILED", description="EKF Initialization Failed"},
      {id=134, warning=true, blocking=false, response=command("noOp"), key="CONTROL_CYCLE_OVERRUN", description="Control Cycle Overrun"},
      {id=136, warning=false, blocking=false, response=command("noOp"), key="POSE_ESTIMATE_NON_PHYSICAL", description="Pose estimate non-physical"},
    }},
    {name="fam", faults={
      {id=16, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from FAM", heartbeat={timeout_sec=1.1, misses=1.0}},
      {id=55, warning=false, blocking=false, response=command("unloadNodelet", "fam", ""), key="INITIALIZATION_FAILED", description="FAM Initialization Failed"},
    }},
  }},
  {name="speed camera", nodes={
    {name="speed_cam", faults={
      {id=10, warning=false, blocking=false, response=command("idlePropulsion"), key="VELOCITY_TOO_HIGH", description="Velocity too high"},
      {id=17, warning=false, blocking=true, response=command("stopAllMotion"), key="HEARTBEAT_MISSING", description="No Heartbeat from Speedcam", heartbeat={timeout_sec=1.1, misses=1.0}},
      {id=56, warning=false, blocking=true, response=command("unloadNodelet", "speed_cam", ""), key="INITIALIZATION_FAILED", description="Speedcam Initialization Failed"},
      {id=126, warning=false, blocking=true, response=command("idlePropulsion"), key="NO_COMMUNICATION_SPEEDCAM", description="Unable to communicate with the Speedcam"},
    }},
  }},
  {name="imu", nodes={
    {name="epson_imu", faults={
      {id=12, warning=false, blocking=false, response=command("idlePropulsion"), key="HEARTBEAT_MISSING", description="No Heartbeat from IMU", heartbeat={timeout_sec=1.1, misses=1.0}},
      {id=112, warning=false, blocking=true, response=command("idlePropulsion"), key="IMU_ACCEL_ABOVE_LIMITS", description="IMU acceleration above limits"},
      {id=145, warning=true, blocking=false, response=command("noOp"), key="BAD_GYRO_DATA", description="IMU returns bad gyro data"},
      {id=146, warning=false, blocking=true, response=command("idlePropulsion"), key="IMU_OVERTEMP", description="IMU overtemp"},
      {id=147, warning=false, blocking=true, response=command("fault"), key="SELF_TEST_FAULT_CODE", description="IMU Fault code - Self test"},
      {id=148, warning=false, blocking=true, response=command("fault"), key="HARDWARE_ERROR_FAULT_CODE", description="IMU Fault code - Hardware error"},
      {id=150, warning=true, blocking=false, response=command("noOp"), key="BAD_ACCEL_DATA", description="IMU returns bad accel data"},
      {id=151, warning=false, blocking=true, response=command("idlePropulsion"), key="NO_IMU_DATA_PACKETS", description="Loss of data packets from IMU"},
    }},
  }},
  {name="procedures", nodes={
    {name="dock", faults={
      {id=48, warning=false, blocking=false, response=command("noOp"), key="HEARTBEAT_MISSING", description="No Heartbeat from Docker", heartbeat={timeout_sec=1.1, misses=4.0}},
      {id=84, warning=false, blocking=false, response=command("unloadNodelet", "dock", ""), key="INITIALIZATION_FAILED", description="Docker Initialization Failed"},
    }},
  }},
}
