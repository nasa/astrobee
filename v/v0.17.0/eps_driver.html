<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NASA Astrobee Robot Software: EPS Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.png" type="image/png" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="freeflyer.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td id="projectlogo"><img alt="Logo" src="astrobee-logo.png" height="100"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NASA Astrobee Robot Software
   &#160;<span id="projectnumber">0.17.0</span>
   </div>
   <div id="projectbrief">Flight software for the Astrobee robots operating inside the International Space Station.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('eps_driver.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">EPS <a class="el" href="structDriver.html">Driver</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Electrical Power Subsystem (EPS) is responsible for controlling power to the various components of the avionics stack. The EPS is controller from the low-level processor (LLP) over <a class="el" href="namespacei2c.html">i2c</a>, by default on /dev/i2c1 with address 0x40.</p>
<p>The <a class="el" href="namespaceeps__driver.html">eps_driver</a> is a proxy library that converts human-readable function calls into <a class="el" href="namespacei2c.html">i2c</a> read and write transactions to and from the EPS. The eps_driver_node uses this proxy library to extract telemetry data, which it broadcasts to ROS. The eps_driver_node also offers a few ROS services that enable remote users to call a subset of commands on the EPS.</p>
<p>The eps_driver_tool is a command-line interface to the <a class="el" href="namespaceeps__driver.html">eps_driver</a>. It allows the user (or scripts) to do the following:</p>
<ul>
<li>Turn on an off power to various avionics components</li>
<li>Configure status LEDs to be on, off or flash</li>
<li>View battery information</li>
<li>View charger information</li>
<li>View housekeeping information</li>
<li>View and clear fault information</li>
<li>View docking and power states</li>
<li>View the build string, software version and serial number</li>
<li>Ring the buzzer</li>
<li>Clear a terminate state</li>
<li>Reboot the EPS</li>
<li>Enter the EPS bootloader</li>
</ul>
<p>The tool itself has build-in documentation. To see it, run the tool without specifying any flags: </p><pre class="fragment">eps_driver_tool
</pre><p>Most commands take the following form, where <code>&lt;system&gt;</code> is one of -led, -hk, -power, -state, -fault, -battery, -string or -charge. The flag -list lists all possible indexes and values for the system. The flag -set sets a value for one or more indexes shown as <code>[ &lt;index&gt; ... ]</code> below. </p><pre class="fragment">eps_driver_tool &lt;system&gt; [ -list | -get | -set &lt;val&gt; ] [ &lt;index&gt; ... ]
</pre><p>Every system supports -list, however only some may support -get or -set. Certain commands may also have other flags. To see the documentation for a specific section, simply add its flag. For example, to see the -led documentation type the following: </p><pre class="fragment">eps_driver_tool -led
</pre><p>You might now know the index or values that you can use. So, take for example the power subsystem. Let's say you want to get a lit of all possible power channels that you can turn on and off: </p><pre class="fragment">eps_driver_tool -power -list
</pre><p>You should see something like this: </p><pre class="fragment">Indexes
 - Low-level processor (llp)
 - Mid-level processor (mlp)
 - High-level processor (hlp)
 - Universal serial bus (usb)
 - Auxiliary (aux)
 - Ethernet (eth)
 - Fan (fan)
 - Speaker (spk)
 - Payload 1 - top-front (pay1)
 - Payload 2 - bottom-front (pay2)
 - Payload 3 - top-aft (pay3)
 - Payload 4 - bottom-aft (pay4)
 - PMC 1 - right / port (pmc1)
 - PMC 2 - left / stbd (pmc2)
 - LED Status 1A (s1a)
 - LED Status 1B (s1b)
 - LED Status 1C (s1c)
 - LED Status 2A (s2a)
 - LED Status 2B (s2b)
 - LED Status 2C (s2c)
 - LED Microphone (mic)
 - LED Camera (cam)
 - LED Streaming (str)
Values
 - Turn off (disable, off, false, 0)
 - Turn on (enable, on, true, 1)
</pre><p>The format of each line above is NAME (index). You might notice that any index or value might have multiple keywords. This is just for convenience, and it means the following two commands are analogous: </p><pre class="fragment">eps_driver_tool -power -set on pmc1 pmc2
eps_driver_tool -power -set enable pmc1 pmc2
</pre><h1><a class="anchor" id="autotoc_md201"></a>
Usage examples</h1>
<p>Flash the camera LED ("cam") at a medium speed of 1Hz ("medium") </p><pre class="fragment">eps_driver_tool -led -set medium cam
</pre><p>To turn on all LEDs ("on") just </p><pre class="fragment">eps_driver_tool -led -set on
</pre><p>Get the EPS software version ("sw") and build time ("build") strings </p><pre class="fragment">eps_driver_tool -string -get sw build
</pre><p>Ring the buzzer at 1500 Hz for two seconds </p><pre class="fragment">eps_driver_tool -buzz -freq 1500 2
</pre><p>Toggle power to both propulsion systems </p><pre class="fragment">eps_driver_tool -power -set off pmc1 pmc2
eps_driver_tool -power -set on  pmc1 pmc2
</pre><p><a class="el" href="eps_driver_test_battery_status.html">Test : Battery status</a> <a class="el" href="eps_driver_test_payload_power.html">Test : Payload power</a> <a class="el" href="eps_driver_test_status_leds.html">Test : Status LEDs</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
<script type="text/javascript" src="/astrobee/doc_version_select.js"></script>
</body>
</html>
