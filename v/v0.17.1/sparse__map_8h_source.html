<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NASA Astrobee Robot Software: localization/sparse_mapping/include/sparse_mapping/sparse_map.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.png" type="image/png" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="freeflyer.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td id="projectlogo"><img alt="Logo" src="astrobee-logo.png" height="100"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NASA Astrobee Robot Software
   &#160;<span id="projectnumber">0.17.1</span>
   </div>
   <div id="projectbrief">Flight software for the Astrobee robots operating inside the International Space Station.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('sparse__map_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">sparse_map.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="sparse__map_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* Copyright (c) 2017, United States Government, as represented by the</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Administrator of the National Aeronautics and Space Administration.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * All rights reserved.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * The Astrobee platform is licensed under the Apache License, Version 2.0</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * (the &quot;License&quot;); you may not use this file except in compliance with the</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * License. You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * License for the specific language governing permissions and limitations</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * under the License.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160; </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#ifndef SPARSE_MAPPING_SPARSE_MAP_H_</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#define SPARSE_MAPPING_SPARSE_MAP_H_</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="eigen__vectors_8h.html">ff_common/eigen_vectors.h</a>&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="matching_8h.html">interest_point/matching.h</a>&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="vocab__tree_8h.html">sparse_mapping/vocab_tree.h</a>&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="sparse__mapping_8h.html">sparse_mapping/sparse_mapping.h</a>&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="camera__model_8h.html">camera/camera_model.h</a>&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="camera__params_8h.html">camera/camera_params.h</a>&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;Eigen/Geometry&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;opencv2/core/core.hpp&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;mutex&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;limits&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacecv.html">cv</a> {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keyword">class </span>Mat;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keyword">class </span>DMatch;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;}</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacesparse__mapping.html">sparse_mapping</a> {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// Non-member function InitializeCidFidToPid() that we will use within</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">// this class and outside of it as well.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespacesparse__mapping.html#a1eb5f6215e92f97a2d039184ee2e85da">InitializeCidFidToPid</a>(<span class="keywordtype">int</span> num_cid,</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                           std::vector&lt;std::map&lt;int, int&gt; &gt; <span class="keyword">const</span>&amp; pid_to_cid_fid,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                           std::vector&lt;std::map&lt;int, int&gt; &gt; * cid_fid_to_pid);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="namespacesparse__mapping.html#a1a1c08044123bb0cd818db3ac07f1a5e">Localize</a>(cv::Mat <span class="keyword">const</span>&amp; test_descriptors,</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;              Eigen::Matrix2Xd <span class="keyword">const</span>&amp; test_keypoints,</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;              <a class="code" href="classcamera_1_1CameraParameters.html">camera::CameraParameters</a> <span class="keyword">const</span>&amp; camera_params,</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;              <a class="code" href="classcamera_1_1CameraModel.html">camera::CameraModel</a>* pose,</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;              std::vector&lt;Eigen::Vector3d&gt;* inlier_landmarks,</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;              std::vector&lt;Eigen::Vector2d&gt;* inlier_observations,</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;              <span class="keywordtype">int</span> num_cid,</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;              std::string <span class="keyword">const</span>&amp; detector_name,</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;              <a class="code" href="structsparse__mapping_1_1VocabDB.html">sparse_mapping::VocabDB</a> * vocab_db,</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;              <span class="keywordtype">int</span> num_similar,</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;              std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; cid_to_filename,</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;              std::vector&lt;cv::Mat&gt; <span class="keyword">const</span>&amp; cid_to_descriptor_map,</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;              std::vector&lt;Eigen::Matrix2Xd &gt; <span class="keyword">const</span>&amp; cid_to_keypoint_map,</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;              std::vector&lt;std::map&lt;int, int&gt; &gt; <span class="keyword">const</span>&amp; cid_fid_to_pid,</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;              std::vector&lt;Eigen::Vector3d&gt; <span class="keyword">const</span>&amp; pid_to_xyz,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;              <span class="keywordtype">int</span> num_ransac_iterations, <span class="keywordtype">int</span> ransac_inlier_tolerance,</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;              <span class="keywordtype">int</span> early_break_landmarks, <span class="keywordtype">int</span> <a class="code" href="interest__points__test__bag_8cc.html#a48f829c48f848ca0e196d73da88d99c2">histogram_equalization</a>,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;              std::vector&lt;int&gt; * cid_list);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html">   84</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structsparse__mapping_1_1SparseMap.html">SparseMap</a> {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  EIGEN_MAKE_ALIGNED_OPERATOR_NEW</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="structsparse__mapping_1_1SparseMap.html">SparseMap</a>(<span class="keyword">const</span> std::vector&lt;std::string&gt; &amp; filenames,</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            <span class="keyword">const</span> std::string &amp; detector,</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="keyword">const</span> <a class="code" href="classcamera_1_1CameraParameters.html">camera::CameraParameters</a> &amp; params);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="structsparse__mapping_1_1SparseMap.html">SparseMap</a>(<span class="keyword">const</span> std::string &amp; protobuf_file,</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keywordtype">bool</span> localization = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="structsparse__mapping_1_1SparseMap.html">SparseMap</a>(<span class="keyword">const</span> std::vector&lt;Eigen::Affine3d&gt;&amp; cid_to_cam_t,</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="keyword">const</span> std::vector&lt;std::string&gt; &amp; filenames,</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="keyword">const</span> std::string &amp; detector,</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keyword">const</span> <a class="code" href="classcamera_1_1CameraParameters.html">camera::CameraParameters</a> &amp; params);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="structsparse__mapping_1_1SparseMap.html">SparseMap</a>(<span class="keywordtype">bool</span> bundler_format, std::string <span class="keyword">const</span>&amp; filename, std::vector&lt;std::string&gt; <span class="keyword">const</span>&amp; files);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a1e2723a3a22a8db1690b923ef62532e7">SetDetectorParams</a>(<span class="keywordtype">int</span> min_features, <span class="keywordtype">int</span> max_features, <span class="keywordtype">int</span> retries,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                         <span class="keywordtype">double</span> min_thresh, <span class="keywordtype">double</span> default_thresh, <span class="keywordtype">double</span> max_thresh);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#af3eda71f72d1575d79a0f7bb1f98aec3">DetectFeatures</a>();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a31c34ccbe58e039aaf9e71ac37256b42">Save</a>(<span class="keyword">const</span> std::string &amp; protobuf_file) <span class="keyword">const</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a844715a581ae0b7c77d3ba56fcbeafd1">Localize</a>(std::string <span class="keyword">const</span>&amp; img_file, <a class="code" href="classcamera_1_1CameraModel.html">camera::CameraModel</a>* pose,</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      std::vector&lt;Eigen::Vector3d&gt;* inlier_landmarks = NULL,</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                std::vector&lt;Eigen::Vector2d&gt;* inlier_observations = NULL,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                std::vector&lt;int&gt; * cid_list = NULL);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a844715a581ae0b7c77d3ba56fcbeafd1">Localize</a>(<span class="keyword">const</span> cv::Mat &amp; image,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <a class="code" href="classcamera_1_1CameraModel.html">camera::CameraModel</a>* pose, std::vector&lt;Eigen::Vector3d&gt;* inlier_landmarks = NULL,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                std::vector&lt;Eigen::Vector2d&gt;* inlier_observations = NULL,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                std::vector&lt;int&gt; * cid_list = NULL);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a844715a581ae0b7c77d3ba56fcbeafd1">Localize</a>(<span class="keyword">const</span> cv::Mat &amp; test_descriptors, <span class="keyword">const</span> Eigen::Matrix2Xd &amp; test_keypoints,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                <a class="code" href="classcamera_1_1CameraModel.html">camera::CameraModel</a>* pose,</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                std::vector&lt;Eigen::Vector3d&gt;* inlier_landmarks,</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                std::vector&lt;Eigen::Vector2d&gt;* inlier_observations,</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                std::vector&lt;int&gt; * cid_list = NULL);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="comment">// access map frames</span></div>
<div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#aa6347ccc84366f137367f1b792338c88">  148</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">size_t</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#aa6347ccc84366f137367f1b792338c88">GetNumFrames</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#aa0268878c2af466abd0a0ae7ea464de9">cid_to_filename_</a>.size();}</div>
<div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#ab77c8192799df639d8bb4738eecd2c1e">  152</a></span>&#160;  <span class="keyword">const</span> std::string &amp; <a class="code" href="structsparse__mapping_1_1SparseMap.html#ab77c8192799df639d8bb4738eecd2c1e">GetFrameFilename</a>(<span class="keywordtype">int</span> frame)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#aa0268878c2af466abd0a0ae7ea464de9">cid_to_filename_</a>[frame];}</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a90a9ba24410b584acdf7ec089d2658b6">  156</a></span>&#160;  <span class="keyword">const</span> <a class="code" href="namespaceoptimization__common.html#aba6b99cfdb45f8b0d4807fea5d5cac65">Eigen::Affine3d</a> &amp; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a90a9ba24410b584acdf7ec089d2658b6">GetFrameGlobalTransform</a>(<span class="keywordtype">int</span> frame)<span class="keyword"> const</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="keyword">        </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a6977634d1079762dca0be4427b125dcd">cid_to_cam_t_global_</a>[frame];}</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#ac2e39e46ad8d89358ff64d998920b61a">  159</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#ac2e39e46ad8d89358ff64d998920b61a">SetFrameGlobalTransform</a>(<span class="keywordtype">int</span> frame, <span class="keyword">const</span> <a class="code" href="namespaceoptimization__common.html#aba6b99cfdb45f8b0d4807fea5d5cac65">Eigen::Affine3d</a> &amp; transform) {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="structsparse__mapping_1_1SparseMap.html#a6977634d1079762dca0be4427b125dcd">cid_to_cam_t_global_</a>[frame] = transform;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  }</div>
<div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a703de1dbd9b28fdc99fafc208a589b60">  165</a></span>&#160;  <span class="keyword">const</span> Eigen::Matrix2Xd &amp; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a703de1dbd9b28fdc99fafc208a589b60">GetFrameKeypoints</a>(<span class="keywordtype">int</span> frame)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a84070c312be16bf9c7d56e73044adf75">cid_to_keypoint_map_</a>[frame];}</div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a4d2b2b7616e6ad5d7bcf96d5c0f77377">  169</a></span>&#160;  cv::Mat <a class="code" href="structsparse__mapping_1_1SparseMap.html#a4d2b2b7616e6ad5d7bcf96d5c0f77377">GetDescriptor</a>(<span class="keywordtype">int</span> frame, <span class="keywordtype">int</span> fid)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a69156242c486e976d3864f38e83aa47d">cid_to_descriptor_map_</a>[frame].row(fid);}</div>
<div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#af710f3442a2eb366d3441e4014ff4a45">  173</a></span>&#160;  <span class="keyword">const</span> std::map&lt;int, int&gt; &amp; <a class="code" href="structsparse__mapping_1_1SparseMap.html#af710f3442a2eb366d3441e4014ff4a45">GetFrameFidToPidMap</a>(<span class="keywordtype">int</span> frame)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a272899915bb31f002dc8ba2abc237ba2">cid_fid_to_pid_</a>[frame];}</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">// access map landmarks</span></div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a30950aa2e1abd069dce73045740f5497">  179</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">size_t</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a30950aa2e1abd069dce73045740f5497">GetNumLandmarks</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#aa2797a3115e8ecb62c7a1d637555a8d6">pid_to_xyz_</a>.size();}</div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a6faf16e930f399d8b3dc927ee90ca725">  183</a></span>&#160;  <a class="code" href="namespacepoint__cloud__common.html#a005e0de16e53929314062280acc62132">Eigen::Vector3d</a> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a6faf16e930f399d8b3dc927ee90ca725">GetLandmarkPosition</a>(<span class="keywordtype">int</span> landmark)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#aa2797a3115e8ecb62c7a1d637555a8d6">pid_to_xyz_</a>[landmark];}</div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a55dbe10695025a0b752628687a0267d4">  188</a></span>&#160;  <span class="keyword">const</span> std::map&lt;int, int&gt; &amp; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a55dbe10695025a0b752628687a0267d4">GetLandmarkCidToFidMap</a>(<span class="keywordtype">int</span> landmark)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a53914f173d9bf2ab081c360c68956f3b">pid_to_cid_fid_</a>[landmark];}</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// access and modify parameters</span></div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a499fe90804677f4362697869127d3c78">  194</a></span>&#160;<span class="comment"></span>  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a499fe90804677f4362697869127d3c78">SetRansacIterations</a>(<span class="keywordtype">int</span> iterations) {<a class="code" href="structsparse__mapping_1_1SparseMap.html#a7ad47f19aec65bc82e43bab9b72b180a">num_ransac_iterations_</a> = iterations;}</div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#ac4c88dd747477b424ac14191d89316bd">  198</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#ac4c88dd747477b424ac14191d89316bd">GetRansacIterations</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a7ad47f19aec65bc82e43bab9b72b180a">num_ransac_iterations_</a>;}</div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a433831f7069b245e4aca8f0c8b6ccd0d">  203</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a433831f7069b245e4aca8f0c8b6ccd0d">SetRansacInlierTolerance</a>(<span class="keywordtype">int</span> tolerance) {<a class="code" href="structsparse__mapping_1_1SparseMap.html#a835530fd44665c089f91fac9cb595b79">ransac_inlier_tolerance_</a> = tolerance;}</div>
<div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#aeeee0606988be4c831bd239f7c70d7ae">  208</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#aeeee0606988be4c831bd239f7c70d7ae">GetRansacInlierTolerance</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a835530fd44665c089f91fac9cb595b79">ransac_inlier_tolerance_</a>;}</div>
<div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#adebc92d2a7755b5e2ab06568833ac89b">  212</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#adebc92d2a7755b5e2ab06568833ac89b">SetEarlyBreakLandmarks</a>(<span class="keywordtype">int</span> early_break_landmarks) {<a class="code" href="structsparse__mapping_1_1SparseMap.html#a33841e20ec487ad381bdde8a42e27598">early_break_landmarks_</a> = early_break_landmarks;}</div>
<div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#ab57a8ec776956874be93373d88f58b37">  213</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#ab57a8ec776956874be93373d88f58b37">SetHistogramEqualization</a>(<span class="keywordtype">int</span> <a class="code" href="interest__points__test__bag_8cc.html#a48f829c48f848ca0e196d73da88d99c2">histogram_equalization</a>) {<a class="code" href="structsparse__mapping_1_1SparseMap.html#ac8b6190c15d1e76229e5564de906f1ac">histogram_equalization_</a> = <a class="code" href="interest__points__test__bag_8cc.html#a48f829c48f848ca0e196d73da88d99c2">histogram_equalization</a>;}</div>
<div class="line"><a name="l00214"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a6194eb0da0ed4568881bf6a95b3300e4">  214</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a6194eb0da0ed4568881bf6a95b3300e4">GetHistogramEqualization</a>() {<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#ac8b6190c15d1e76229e5564de906f1ac">histogram_equalization_</a>;}</div>
<div class="line"><a name="l00218"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a4cefcbbead06d78dbeb3c5e9b33ce32b">  218</a></span>&#160;  <a class="code" href="classcamera_1_1CameraParameters.html">camera::CameraParameters</a> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a4cefcbbead06d78dbeb3c5e9b33ce32b">GetCameraParameters</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a9f4bb0c00b3063fe58903dd23422e6df">camera_params_</a>;}</div>
<div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a07ebe3ada6a66e313ae691035bf70630">  219</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a07ebe3ada6a66e313ae691035bf70630">SetCameraParameters</a>(<a class="code" href="classcamera_1_1CameraParameters.html">camera::CameraParameters</a> camera_params) {<a class="code" href="structsparse__mapping_1_1SparseMap.html#a9f4bb0c00b3063fe58903dd23422e6df">camera_params_</a> = camera_params;}</div>
<div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#aa74eca6de164bd7f0f1c7b90cf8c4106">  223</a></span>&#160;  <span class="keywordtype">size_t</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#aa74eca6de164bd7f0f1c7b90cf8c4106">GetNumObservations</a>(<span class="keywordtype">void</span>)<span class="keyword"> const </span>{<span class="keywordflow">return</span> std::accumulate(<a class="code" href="structsparse__mapping_1_1SparseMap.html#a53914f173d9bf2ab081c360c68956f3b">pid_to_cid_fid_</a>.begin(),</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                                                <a class="code" href="structsparse__mapping_1_1SparseMap.html#a53914f173d9bf2ab081c360c68956f3b">pid_to_cid_fid_</a>.end(),</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                                                                0, [](<span class="keywordtype">size_t</span> v, std::map&lt;int, int&gt; <span class="keyword">const</span>&amp; map)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                                                { return v + map.size(); }); }</div>
<div class="line"><a name="l00230"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#ab4cc2cc4b14d3f8feaa20b74a191ae12">  230</a></span>&#160;  <a class="code" href="namespaceoptimization__common.html#aba6b99cfdb45f8b0d4807fea5d5cac65">Eigen::Affine3d</a> <a class="code" href="structsparse__mapping_1_1SparseMap.html#ab4cc2cc4b14d3f8feaa20b74a191ae12">GetWorldTransform</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a5f32739f76311bf51ab6c95d25e38d79">world_transform_</a>;}</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a3b93c70c4223211800d8d5475f200f19">  235</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a3b93c70c4223211800d8d5475f200f19">ApplyTransform</a>(<a class="code" href="namespaceoptimization__common.html#aba6b99cfdb45f8b0d4807fea5d5cac65">Eigen::Affine3d</a> <span class="keyword">const</span>&amp; T) {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="namespacesparse__mapping.html#adb5a25d53aca2dd645750c414dfeece6">sparse_mapping::TransformCamerasAndPoints</a>(T, &amp;<a class="code" href="structsparse__mapping_1_1SparseMap.html#a6977634d1079762dca0be4427b125dcd">cid_to_cam_t_global_</a>, &amp;<a class="code" href="structsparse__mapping_1_1SparseMap.html#aa2797a3115e8ecb62c7a1d637555a8d6">pid_to_xyz_</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// Load map. If localization is true, load only the parts of the map</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">// needed for localization.</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a343b37d9ff265a3fd7d05a3ee69dfcb3">Load</a>(<span class="keyword">const</span> std::string &amp; protobuf_file, <span class="keywordtype">bool</span> localization = <span class="keyword">false</span>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// construct from pid_to_cid_fid</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a863b34e7ae623bebc5e4156792ecb2f4">InitializeCidFidToPid</a>();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// detect features with opencv</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a8cc04bcc56ec3c45f9261bfd5c9c32df">DetectFeaturesFromFile</a>(std::string <span class="keyword">const</span>&amp; filename,</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                              <span class="keywordtype">bool</span> multithreaded,</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                              cv::Mat* descriptors,</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                              Eigen::Matrix2Xd* keypoints);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#af3eda71f72d1575d79a0f7bb1f98aec3">DetectFeatures</a>(cv::Mat <span class="keyword">const</span>&amp; image,</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                      <span class="keywordtype">bool</span> multithreaded,</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                      cv::Mat* descriptors,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                      Eigen::Matrix2Xd* keypoints);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="comment">// delete feature descriptors with no matching landmark</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a323d80cc4853e5b7f75e55dcb611af4d">PruneMap</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a3cb700bc613b3080b4135ac21e41e7fe">  261</a></span>&#160;  <span class="keywordtype">void</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a3cb700bc613b3080b4135ac21e41e7fe">SetNumSimilar</a>(<span class="keywordtype">int</span> num_similar) {<a class="code" href="structsparse__mapping_1_1SparseMap.html#a7265eee358dad6034de0fb6efe0c164d">num_similar_</a> = num_similar;}</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160; </div>
<div class="line"><a name="l00263"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a8c0a316478e2e040b9da0fddbd3d8f12">  263</a></span>&#160;  std::string <a class="code" href="structsparse__mapping_1_1SparseMap.html#a8c0a316478e2e040b9da0fddbd3d8f12">GetDetectorName</a>() { <span class="keywordflow">return</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#aad5c55c0e61c5c5af54e79d63276d571">detector_</a>.<a class="code" href="classinterest__point_1_1FeatureDetector.html#a84d83ccec1aafeab756a96b83ca3b90f">GetDetectorName</a>(); }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// stored in map file</span></div>
<div class="line"><a name="l00266"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#aa0268878c2af466abd0a0ae7ea464de9">  266</a></span>&#160;  std::vector&lt;std::string&gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#aa0268878c2af466abd0a0ae7ea464de9">cid_to_filename_</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="comment">// TODO(bcoltin) replace Eigen2Xd everywhere with one keypoint class</span></div>
<div class="line"><a name="l00268"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a84070c312be16bf9c7d56e73044adf75">  268</a></span>&#160;  std::vector&lt;Eigen::Matrix2Xd &gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a84070c312be16bf9c7d56e73044adf75">cid_to_keypoint_map_</a>;</div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a53914f173d9bf2ab081c360c68956f3b">  269</a></span>&#160;  std::vector&lt;std::map&lt;int, int&gt; &gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a53914f173d9bf2ab081c360c68956f3b">pid_to_cid_fid_</a>;</div>
<div class="line"><a name="l00270"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#aa2797a3115e8ecb62c7a1d637555a8d6">  270</a></span>&#160;  std::vector&lt;Eigen::Vector3d&gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#aa2797a3115e8ecb62c7a1d637555a8d6">pid_to_xyz_</a>;</div>
<div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a6977634d1079762dca0be4427b125dcd">  271</a></span>&#160;  std::vector&lt;Eigen::Affine3d &gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a6977634d1079762dca0be4427b125dcd">cid_to_cam_t_global_</a>;</div>
<div class="line"><a name="l00272"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a69156242c486e976d3864f38e83aa47d">  272</a></span>&#160;  std::vector&lt;cv::Mat&gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a69156242c486e976d3864f38e83aa47d">cid_to_descriptor_map_</a>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="comment">// generated on load</span></div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a272899915bb31f002dc8ba2abc237ba2">  274</a></span>&#160;  std::vector&lt;std::map&lt;int, int&gt; &gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a272899915bb31f002dc8ba2abc237ba2">cid_fid_to_pid_</a>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#aad5c55c0e61c5c5af54e79d63276d571">  276</a></span>&#160;  <a class="code" href="classinterest__point_1_1FeatureDetector.html">interest_point::FeatureDetector</a> <a class="code" href="structsparse__mapping_1_1SparseMap.html#aad5c55c0e61c5c5af54e79d63276d571">detector_</a>;</div>
<div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a9f4bb0c00b3063fe58903dd23422e6df">  277</a></span>&#160;  <a class="code" href="classcamera_1_1CameraParameters.html">camera::CameraParameters</a> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a9f4bb0c00b3063fe58903dd23422e6df">camera_params_</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#ab7ccc59924ffc69f1338b602c3f7a652">  278</a></span>&#160;  <span class="keyword">mutable</span> <a class="code" href="structsparse__mapping_1_1VocabDB.html">sparse_mapping::VocabDB</a> <a class="code" href="structsparse__mapping_1_1SparseMap.html#ab7ccc59924ffc69f1338b602c3f7a652">vocab_db_</a>;  <span class="comment">// TODO(oalexan1): Mutable means someone is doing something wrong.</span></div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a7265eee358dad6034de0fb6efe0c164d">  279</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a7265eee358dad6034de0fb6efe0c164d">num_similar_</a>;</div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a7ad47f19aec65bc82e43bab9b72b180a">  280</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a7ad47f19aec65bc82e43bab9b72b180a">num_ransac_iterations_</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a835530fd44665c089f91fac9cb595b79">  281</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a835530fd44665c089f91fac9cb595b79">ransac_inlier_tolerance_</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a33841e20ec487ad381bdde8a42e27598">  282</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a33841e20ec487ad381bdde8a42e27598">early_break_landmarks_</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#ac8b6190c15d1e76229e5564de906f1ac">  283</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html#ac8b6190c15d1e76229e5564de906f1ac">histogram_equalization_</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// e.g, 10th db image is 3rd image in cid_to_filename_</span></div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a176f32e6b79e7e32a94b25fe687bd1f2">  286</a></span>&#160;  std::map&lt;int, int&gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a176f32e6b79e7e32a94b25fe687bd1f2">db_to_cid_map_</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <span class="comment">// If datastructure is available, match only pairs of cids</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// that are present in it (this info can come from example from</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">// a map that was built previously with the same images but</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">// a different descriptor.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#aa96f5f640cdf3ab7090d6fd75ae9fa1f">  292</a></span>&#160;  std::map&lt; int, std::set&lt;int&gt; &gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#aa96f5f640cdf3ab7090d6fd75ae9fa1f">cid_to_cid_</a>;  <span class="comment">// TODO(oalexan1): Need not be a member</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <span class="comment">// These are used to register the map to real world coordinates</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// with information provided by the user.</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="comment">// TODO(oalexan1): These need not be members</span></div>
<div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a5f32739f76311bf51ab6c95d25e38d79">  297</a></span>&#160;  <a class="code" href="namespaceoptimization__common.html#aba6b99cfdb45f8b0d4807fea5d5cac65">Eigen::Affine3d</a> <a class="code" href="structsparse__mapping_1_1SparseMap.html#a5f32739f76311bf51ab6c95d25e38d79">world_transform_</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a209518d0797ebb0a42289e40fb42ae3d">  298</a></span>&#160;  std::vector&lt;Eigen::Matrix2Xd&gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a209518d0797ebb0a42289e40fb42ae3d">user_cid_to_keypoint_map_</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a8168d7ccc64407ca6d13be2d37767515">  299</a></span>&#160;  std::vector&lt;std::map&lt;int, int&gt; &gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a8168d7ccc64407ca6d13be2d37767515">user_pid_to_cid_fid_</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#a7c5658449d8c6e9cc3c9275f9236a7a4">  300</a></span>&#160;  std::vector&lt;Eigen::Vector3d&gt; <a class="code" href="structsparse__mapping_1_1SparseMap.html#a7c5658449d8c6e9cc3c9275f9236a7a4">user_pid_to_xyz_</a>;</div>
<div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="structsparse__mapping_1_1SparseMap.html#ae24863994af2a0b2960d87e967655c8d">  301</a></span>&#160;  std::mutex <a class="code" href="structsparse__mapping_1_1SparseMap.html#ae24863994af2a0b2960d87e967655c8d">mutex_detector_</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160; </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; <span class="keyword">private</span>:</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">// Create an empty map. It is strongly recommended to not use this function,</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// as it requires carefully initializing many members. Hence this is made</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// private. Consider using the other constructors.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <a class="code" href="structsparse__mapping_1_1SparseMap.html">SparseMap</a>();</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="comment">// I found out the hard way that sparse maps cannot be copied</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="comment">// correctly, hence prohibit this. The only good way seems to be to</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="comment">// load a copy from disk. (oalexan1)</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="structsparse__mapping_1_1SparseMap.html">SparseMap</a>(<a class="code" href="structsparse__mapping_1_1SparseMap.html">SparseMap</a> &amp;);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="structsparse__mapping_1_1SparseMap.html">SparseMap</a>&amp; operator=(<span class="keyword">const</span> <a class="code" href="structsparse__mapping_1_1SparseMap.html">SparseMap</a>&amp;);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="comment">// Reorder the images in the map and the rest of the data accordingly</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordtype">void</span> reorderMap(std::map&lt;int, int&gt; <span class="keyword">const</span>&amp; old_cid_to_new_cid);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;};</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}  <span class="comment">// namespace sparse_mapping</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160; </div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor">#endif  // SPARSE_MAPPING_SPARSE_MAP_H_</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_af710f3442a2eb366d3441e4014ff4a45"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#af710f3442a2eb366d3441e4014ff4a45">sparse_mapping::SparseMap::GetFrameFidToPidMap</a></div><div class="ttdeci">const std::map&lt; int, int &gt; &amp; GetFrameFidToPidMap(int frame) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:173</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a33841e20ec487ad381bdde8a42e27598"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a33841e20ec487ad381bdde8a42e27598">sparse_mapping::SparseMap::early_break_landmarks_</a></div><div class="ttdeci">int early_break_landmarks_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:282</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a433831f7069b245e4aca8f0c8b6ccd0d"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a433831f7069b245e4aca8f0c8b6ccd0d">sparse_mapping::SparseMap::SetRansacInlierTolerance</a></div><div class="ttdeci">void SetRansacInlierTolerance(int tolerance)</div><div class="ttdef"><b>Definition:</b> sparse_map.h:203</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a272899915bb31f002dc8ba2abc237ba2"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a272899915bb31f002dc8ba2abc237ba2">sparse_mapping::SparseMap::cid_fid_to_pid_</a></div><div class="ttdeci">std::vector&lt; std::map&lt; int, int &gt; &gt; cid_fid_to_pid_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:274</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a84070c312be16bf9c7d56e73044adf75"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a84070c312be16bf9c7d56e73044adf75">sparse_mapping::SparseMap::cid_to_keypoint_map_</a></div><div class="ttdeci">std::vector&lt; Eigen::Matrix2Xd &gt; cid_to_keypoint_map_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:268</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a90a9ba24410b584acdf7ec089d2658b6"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a90a9ba24410b584acdf7ec089d2658b6">sparse_mapping::SparseMap::GetFrameGlobalTransform</a></div><div class="ttdeci">const Eigen::Affine3d &amp; GetFrameGlobalTransform(int frame) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:156</div></div>
<div class="ttc" id="anamespacesparse__mapping_html_a1eb5f6215e92f97a2d039184ee2e85da"><div class="ttname"><a href="namespacesparse__mapping.html#a1eb5f6215e92f97a2d039184ee2e85da">sparse_mapping::InitializeCidFidToPid</a></div><div class="ttdeci">void InitializeCidFidToPid(int num_cid, std::vector&lt; std::map&lt; int, int &gt; &gt; const &amp;pid_to_cid_fid, std::vector&lt; std::map&lt; int, int &gt; &gt; *cid_fid_to_pid)</div><div class="ttdef"><b>Definition:</b> sparse_map.cc:562</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a176f32e6b79e7e32a94b25fe687bd1f2"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a176f32e6b79e7e32a94b25fe687bd1f2">sparse_mapping::SparseMap::db_to_cid_map_</a></div><div class="ttdeci">std::map&lt; int, int &gt; db_to_cid_map_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:286</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a323d80cc4853e5b7f75e55dcb611af4d"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a323d80cc4853e5b7f75e55dcb611af4d">sparse_mapping::SparseMap::PruneMap</a></div><div class="ttdeci">void PruneMap(void)</div><div class="ttdef"><b>Definition:</b> sparse_map.cc:791</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a6977634d1079762dca0be4427b125dcd"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a6977634d1079762dca0be4427b125dcd">sparse_mapping::SparseMap::cid_to_cam_t_global_</a></div><div class="ttdeci">std::vector&lt; Eigen::Affine3d &gt; cid_to_cam_t_global_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:271</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a703de1dbd9b28fdc99fafc208a589b60"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a703de1dbd9b28fdc99fafc208a589b60">sparse_mapping::SparseMap::GetFrameKeypoints</a></div><div class="ttdeci">const Eigen::Matrix2Xd &amp; GetFrameKeypoints(int frame) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:165</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_af3eda71f72d1575d79a0f7bb1f98aec3"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#af3eda71f72d1575d79a0f7bb1f98aec3">sparse_mapping::SparseMap::DetectFeatures</a></div><div class="ttdeci">void DetectFeatures()</div><div class="ttdef"><b>Definition:</b> sparse_map.cc:239</div></div>
<div class="ttc" id="anamespacesparse__mapping_html"><div class="ttname"><a href="namespacesparse__mapping.html">sparse_mapping</a></div><div class="ttdef"><b>Definition:</b> ransac.h:33</div></div>
<div class="ttc" id="aclassinterest__point_1_1FeatureDetector_html"><div class="ttname"><a href="classinterest__point_1_1FeatureDetector.html">interest_point::FeatureDetector</a></div><div class="ttdef"><b>Definition:</b> matching.h:53</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a835530fd44665c089f91fac9cb595b79"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a835530fd44665c089f91fac9cb595b79">sparse_mapping::SparseMap::ransac_inlier_tolerance_</a></div><div class="ttdeci">int ransac_inlier_tolerance_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:281</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_aa0268878c2af466abd0a0ae7ea464de9"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#aa0268878c2af466abd0a0ae7ea464de9">sparse_mapping::SparseMap::cid_to_filename_</a></div><div class="ttdeci">std::vector&lt; std::string &gt; cid_to_filename_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:266</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_ac8b6190c15d1e76229e5564de906f1ac"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#ac8b6190c15d1e76229e5564de906f1ac">sparse_mapping::SparseMap::histogram_equalization_</a></div><div class="ttdeci">int histogram_equalization_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:283</div></div>
<div class="ttc" id="aclasscamera_1_1CameraParameters_html"><div class="ttname"><a href="classcamera_1_1CameraParameters.html">camera::CameraParameters</a></div><div class="ttdef"><b>Definition:</b> camera_params.h:58</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a3cb700bc613b3080b4135ac21e41e7fe"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a3cb700bc613b3080b4135ac21e41e7fe">sparse_mapping::SparseMap::SetNumSimilar</a></div><div class="ttdeci">void SetNumSimilar(int num_similar)</div><div class="ttdef"><b>Definition:</b> sparse_map.h:261</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a31c34ccbe58e039aaf9e71ac37256b42"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a31c34ccbe58e039aaf9e71ac37256b42">sparse_mapping::SparseMap::Save</a></div><div class="ttdeci">void Save(const std::string &amp;protobuf_file) const</div><div class="ttdef"><b>Definition:</b> sparse_map.cc:435</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a1e2723a3a22a8db1690b923ef62532e7"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a1e2723a3a22a8db1690b923ef62532e7">sparse_mapping::SparseMap::SetDetectorParams</a></div><div class="ttdeci">void SetDetectorParams(int min_features, int max_features, int retries, double min_thresh, double default_thresh, double max_thresh)</div><div class="ttdef"><b>Definition:</b> sparse_map.cc:427</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a7ad47f19aec65bc82e43bab9b72b180a"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a7ad47f19aec65bc82e43bab9b72b180a">sparse_mapping::SparseMap::num_ransac_iterations_</a></div><div class="ttdeci">int num_ransac_iterations_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:280</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_aad5c55c0e61c5c5af54e79d63276d571"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#aad5c55c0e61c5c5af54e79d63276d571">sparse_mapping::SparseMap::detector_</a></div><div class="ttdeci">interest_point::FeatureDetector detector_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:276</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_ac2e39e46ad8d89358ff64d998920b61a"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#ac2e39e46ad8d89358ff64d998920b61a">sparse_mapping::SparseMap::SetFrameGlobalTransform</a></div><div class="ttdeci">void SetFrameGlobalTransform(int frame, const Eigen::Affine3d &amp;transform)</div><div class="ttdef"><b>Definition:</b> sparse_map.h:159</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a5f32739f76311bf51ab6c95d25e38d79"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a5f32739f76311bf51ab6c95d25e38d79">sparse_mapping::SparseMap::world_transform_</a></div><div class="ttdeci">Eigen::Affine3d world_transform_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:297</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a69156242c486e976d3864f38e83aa47d"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a69156242c486e976d3864f38e83aa47d">sparse_mapping::SparseMap::cid_to_descriptor_map_</a></div><div class="ttdeci">std::vector&lt; cv::Mat &gt; cid_to_descriptor_map_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:272</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a4d2b2b7616e6ad5d7bcf96d5c0f77377"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a4d2b2b7616e6ad5d7bcf96d5c0f77377">sparse_mapping::SparseMap::GetDescriptor</a></div><div class="ttdeci">cv::Mat GetDescriptor(int frame, int fid) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:169</div></div>
<div class="ttc" id="aclasscamera_1_1CameraModel_html"><div class="ttname"><a href="classcamera_1_1CameraModel.html">camera::CameraModel</a></div><div class="ttdef"><b>Definition:</b> camera_model.h:31</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a55dbe10695025a0b752628687a0267d4"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a55dbe10695025a0b752628687a0267d4">sparse_mapping::SparseMap::GetLandmarkCidToFidMap</a></div><div class="ttdeci">const std::map&lt; int, int &gt; &amp; GetLandmarkCidToFidMap(int landmark) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:188</div></div>
<div class="ttc" id="amatching_8h_html"><div class="ttname"><a href="matching_8h.html">matching.h</a></div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_ab7ccc59924ffc69f1338b602c3f7a652"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#ab7ccc59924ffc69f1338b602c3f7a652">sparse_mapping::SparseMap::vocab_db_</a></div><div class="ttdeci">sparse_mapping::VocabDB vocab_db_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:278</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a9f4bb0c00b3063fe58903dd23422e6df"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a9f4bb0c00b3063fe58903dd23422e6df">sparse_mapping::SparseMap::camera_params_</a></div><div class="ttdeci">camera::CameraParameters camera_params_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:277</div></div>
<div class="ttc" id="anamespacesparse__mapping_html_a1a1c08044123bb0cd818db3ac07f1a5e"><div class="ttname"><a href="namespacesparse__mapping.html#a1a1c08044123bb0cd818db3ac07f1a5e">sparse_mapping::Localize</a></div><div class="ttdeci">bool Localize(cv::Mat const &amp;test_descriptors, Eigen::Matrix2Xd const &amp;test_keypoints, camera::CameraParameters const &amp;camera_params, camera::CameraModel *pose, std::vector&lt; Eigen::Vector3d &gt; *inlier_landmarks, std::vector&lt; Eigen::Vector2d &gt; *inlier_observations, int num_cid, std::string const &amp;detector_name, sparse_mapping::VocabDB *vocab_db, int num_similar, std::vector&lt; std::string &gt; const &amp;cid_to_filename, std::vector&lt; cv::Mat &gt; const &amp;cid_to_descriptor_map, std::vector&lt; Eigen::Matrix2Xd &gt; const &amp;cid_to_keypoint_map, std::vector&lt; std::map&lt; int, int &gt; &gt; const &amp;cid_fid_to_pid, std::vector&lt; Eigen::Vector3d &gt; const &amp;pid_to_xyz, int num_ransac_iterations, int ransac_inlier_tolerance, int early_break_landmarks, int histogram_equalization, std::vector&lt; int &gt; *cid_list)</div><div class="ttdef"><b>Definition:</b> sparse_map.cc:651</div></div>
<div class="ttc" id="avocab__tree_8h_html"><div class="ttname"><a href="vocab__tree_8h.html">vocab_tree.h</a></div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a844715a581ae0b7c77d3ba56fcbeafd1"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a844715a581ae0b7c77d3ba56fcbeafd1">sparse_mapping::SparseMap::Localize</a></div><div class="ttdeci">bool Localize(std::string const &amp;img_file, camera::CameraModel *pose, std::vector&lt; Eigen::Vector3d &gt; *inlier_landmarks=NULL, std::vector&lt; Eigen::Vector2d &gt; *inlier_observations=NULL, std::vector&lt; int &gt; *cid_list=NULL)</div><div class="ttdef"><b>Definition:</b> sparse_map.cc:761</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a8168d7ccc64407ca6d13be2d37767515"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a8168d7ccc64407ca6d13be2d37767515">sparse_mapping::SparseMap::user_pid_to_cid_fid_</a></div><div class="ttdeci">std::vector&lt; std::map&lt; int, int &gt; &gt; user_pid_to_cid_fid_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:299</div></div>
<div class="ttc" id="anamespacepoint__cloud__common_html_a005e0de16e53929314062280acc62132"><div class="ttname"><a href="namespacepoint__cloud__common.html#a005e0de16e53929314062280acc62132">point_cloud_common::Vector3d</a></div><div class="ttdeci">Eigen::Vector3d Vector3d(const PointType &amp;point)</div><div class="ttdef"><b>Definition:</b> utilities.h:328</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a8c0a316478e2e040b9da0fddbd3d8f12"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a8c0a316478e2e040b9da0fddbd3d8f12">sparse_mapping::SparseMap::GetDetectorName</a></div><div class="ttdeci">std::string GetDetectorName()</div><div class="ttdef"><b>Definition:</b> sparse_map.h:263</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_ab57a8ec776956874be93373d88f58b37"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#ab57a8ec776956874be93373d88f58b37">sparse_mapping::SparseMap::SetHistogramEqualization</a></div><div class="ttdeci">void SetHistogramEqualization(int histogram_equalization)</div><div class="ttdef"><b>Definition:</b> sparse_map.h:213</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a343b37d9ff265a3fd7d05a3ee69dfcb3"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a343b37d9ff265a3fd7d05a3ee69dfcb3">sparse_mapping::SparseMap::Load</a></div><div class="ttdeci">void Load(const std::string &amp;protobuf_file, bool localization=false)</div><div class="ttdef"><b>Definition:</b> sparse_map.cc:272</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_ab4cc2cc4b14d3f8feaa20b74a191ae12"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#ab4cc2cc4b14d3f8feaa20b74a191ae12">sparse_mapping::SparseMap::GetWorldTransform</a></div><div class="ttdeci">Eigen::Affine3d GetWorldTransform() const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:230</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a4cefcbbead06d78dbeb3c5e9b33ce32b"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a4cefcbbead06d78dbeb3c5e9b33ce32b">sparse_mapping::SparseMap::GetCameraParameters</a></div><div class="ttdeci">camera::CameraParameters GetCameraParameters(void) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:218</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a53914f173d9bf2ab081c360c68956f3b"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a53914f173d9bf2ab081c360c68956f3b">sparse_mapping::SparseMap::pid_to_cid_fid_</a></div><div class="ttdeci">std::vector&lt; std::map&lt; int, int &gt; &gt; pid_to_cid_fid_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:269</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_ac4c88dd747477b424ac14191d89316bd"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#ac4c88dd747477b424ac14191d89316bd">sparse_mapping::SparseMap::GetRansacIterations</a></div><div class="ttdeci">int GetRansacIterations(void) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:198</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a499fe90804677f4362697869127d3c78"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a499fe90804677f4362697869127d3c78">sparse_mapping::SparseMap::SetRansacIterations</a></div><div class="ttdeci">void SetRansacIterations(int iterations)</div><div class="ttdef"><b>Definition:</b> sparse_map.h:194</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a7c5658449d8c6e9cc3c9275f9236a7a4"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a7c5658449d8c6e9cc3c9275f9236a7a4">sparse_mapping::SparseMap::user_pid_to_xyz_</a></div><div class="ttdeci">std::vector&lt; Eigen::Vector3d &gt; user_pid_to_xyz_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:300</div></div>
<div class="ttc" id="acamera__model_8h_html"><div class="ttname"><a href="camera__model_8h.html">camera_model.h</a></div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a07ebe3ada6a66e313ae691035bf70630"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a07ebe3ada6a66e313ae691035bf70630">sparse_mapping::SparseMap::SetCameraParameters</a></div><div class="ttdeci">void SetCameraParameters(camera::CameraParameters camera_params)</div><div class="ttdef"><b>Definition:</b> sparse_map.h:219</div></div>
<div class="ttc" id="astructsparse__mapping_1_1VocabDB_html"><div class="ttname"><a href="structsparse__mapping_1_1VocabDB.html">sparse_mapping::VocabDB</a></div><div class="ttdef"><b>Definition:</b> vocab_tree.h:74</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a30950aa2e1abd069dce73045740f5497"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a30950aa2e1abd069dce73045740f5497">sparse_mapping::SparseMap::GetNumLandmarks</a></div><div class="ttdeci">size_t GetNumLandmarks(void) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:179</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a6faf16e930f399d8b3dc927ee90ca725"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a6faf16e930f399d8b3dc927ee90ca725">sparse_mapping::SparseMap::GetLandmarkPosition</a></div><div class="ttdeci">Eigen::Vector3d GetLandmarkPosition(int landmark) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:183</div></div>
<div class="ttc" id="aeigen__vectors_8h_html"><div class="ttname"><a href="eigen__vectors_8h.html">eigen_vectors.h</a></div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a863b34e7ae623bebc5e4156792ecb2f4"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a863b34e7ae623bebc5e4156792ecb2f4">sparse_mapping::SparseMap::InitializeCidFidToPid</a></div><div class="ttdeci">void InitializeCidFidToPid()</div><div class="ttdef"><b>Definition:</b> sparse_map.cc:575</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_ab77c8192799df639d8bb4738eecd2c1e"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#ab77c8192799df639d8bb4738eecd2c1e">sparse_mapping::SparseMap::GetFrameFilename</a></div><div class="ttdeci">const std::string &amp; GetFrameFilename(int frame) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:152</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_aa96f5f640cdf3ab7090d6fd75ae9fa1f"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#aa96f5f640cdf3ab7090d6fd75ae9fa1f">sparse_mapping::SparseMap::cid_to_cid_</a></div><div class="ttdeci">std::map&lt; int, std::set&lt; int &gt; &gt; cid_to_cid_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:292</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_aa2797a3115e8ecb62c7a1d637555a8d6"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#aa2797a3115e8ecb62c7a1d637555a8d6">sparse_mapping::SparseMap::pid_to_xyz_</a></div><div class="ttdeci">std::vector&lt; Eigen::Vector3d &gt; pid_to_xyz_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:270</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_aa74eca6de164bd7f0f1c7b90cf8c4106"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#aa74eca6de164bd7f0f1c7b90cf8c4106">sparse_mapping::SparseMap::GetNumObservations</a></div><div class="ttdeci">size_t GetNumObservations(void) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:223</div></div>
<div class="ttc" id="ainterest__points__test__bag_8cc_html_a48f829c48f848ca0e196d73da88d99c2"><div class="ttname"><a href="interest__points__test__bag_8cc.html#a48f829c48f848ca0e196d73da88d99c2">histogram_equalization</a></div><div class="ttdeci">int histogram_equalization</div><div class="ttdef"><b>Definition:</b> interest_points_test_bag.cc:38</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_aa6347ccc84366f137367f1b792338c88"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#aa6347ccc84366f137367f1b792338c88">sparse_mapping::SparseMap::GetNumFrames</a></div><div class="ttdeci">size_t GetNumFrames(void) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:148</div></div>
<div class="ttc" id="asparse__mapping_8h_html"><div class="ttname"><a href="sparse__mapping_8h.html">sparse_mapping.h</a></div></div>
<div class="ttc" id="anamespaceoptimization__common_html_aba6b99cfdb45f8b0d4807fea5d5cac65"><div class="ttname"><a href="namespaceoptimization__common.html#aba6b99cfdb45f8b0d4807fea5d5cac65">optimization_common::Affine3d</a></div><div class="ttdeci">Eigen::Affine3d Affine3d(const Eigen::Matrix&lt; double, 7, 1 &gt; &amp;affine_vector)</div><div class="ttdef"><b>Definition:</b> utilities.cc:43</div></div>
<div class="ttc" id="anamespacesparse__mapping_html_adb5a25d53aca2dd645750c414dfeece6"><div class="ttname"><a href="namespacesparse__mapping.html#adb5a25d53aca2dd645750c414dfeece6">sparse_mapping::TransformCamerasAndPoints</a></div><div class="ttdeci">void TransformCamerasAndPoints(Eigen::Affine3d const &amp;A, std::vector&lt; Eigen::Affine3d &gt; *cid_to_cam_t, std::vector&lt; Eigen::Vector3d &gt; *xyz)</div><div class="ttdef"><b>Definition:</b> sparse_mapping.cc:982</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a8cc04bcc56ec3c45f9261bfd5c9c32df"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a8cc04bcc56ec3c45f9261bfd5c9c32df">sparse_mapping::SparseMap::DetectFeaturesFromFile</a></div><div class="ttdeci">void DetectFeaturesFromFile(std::string const &amp;filename, bool multithreaded, cv::Mat *descriptors, Eigen::Matrix2Xd *keypoints)</div><div class="ttdef"><b>Definition:</b> sparse_map.cc:581</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_ae24863994af2a0b2960d87e967655c8d"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#ae24863994af2a0b2960d87e967655c8d">sparse_mapping::SparseMap::mutex_detector_</a></div><div class="ttdeci">std::mutex mutex_detector_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:301</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a6194eb0da0ed4568881bf6a95b3300e4"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a6194eb0da0ed4568881bf6a95b3300e4">sparse_mapping::SparseMap::GetHistogramEqualization</a></div><div class="ttdeci">int GetHistogramEqualization()</div><div class="ttdef"><b>Definition:</b> sparse_map.h:214</div></div>
<div class="ttc" id="anamespacecv_html"><div class="ttname"><a href="namespacecv.html">cv</a></div><div class="ttdef"><b>Definition:</b> camera_params.h:31</div></div>
<div class="ttc" id="aclassinterest__point_1_1FeatureDetector_html_a84d83ccec1aafeab756a96b83ca3b90f"><div class="ttname"><a href="classinterest__point_1_1FeatureDetector.html#a84d83ccec1aafeab756a96b83ca3b90f">interest_point::FeatureDetector::GetDetectorName</a></div><div class="ttdeci">std::string GetDetectorName() const</div><div class="ttdef"><b>Definition:</b> matching.h:76</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html">sparse_mapping::SparseMap</a></div><div class="ttdef"><b>Definition:</b> sparse_map.h:84</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_aeeee0606988be4c831bd239f7c70d7ae"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#aeeee0606988be4c831bd239f7c70d7ae">sparse_mapping::SparseMap::GetRansacInlierTolerance</a></div><div class="ttdeci">int GetRansacInlierTolerance(void) const</div><div class="ttdef"><b>Definition:</b> sparse_map.h:208</div></div>
<div class="ttc" id="acamera__params_8h_html"><div class="ttname"><a href="camera__params_8h.html">camera_params.h</a></div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_adebc92d2a7755b5e2ab06568833ac89b"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#adebc92d2a7755b5e2ab06568833ac89b">sparse_mapping::SparseMap::SetEarlyBreakLandmarks</a></div><div class="ttdeci">void SetEarlyBreakLandmarks(int early_break_landmarks)</div><div class="ttdef"><b>Definition:</b> sparse_map.h:212</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a7265eee358dad6034de0fb6efe0c164d"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a7265eee358dad6034de0fb6efe0c164d">sparse_mapping::SparseMap::num_similar_</a></div><div class="ttdeci">int num_similar_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:279</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a209518d0797ebb0a42289e40fb42ae3d"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a209518d0797ebb0a42289e40fb42ae3d">sparse_mapping::SparseMap::user_cid_to_keypoint_map_</a></div><div class="ttdeci">std::vector&lt; Eigen::Matrix2Xd &gt; user_cid_to_keypoint_map_</div><div class="ttdef"><b>Definition:</b> sparse_map.h:298</div></div>
<div class="ttc" id="astructsparse__mapping_1_1SparseMap_html_a3b93c70c4223211800d8d5475f200f19"><div class="ttname"><a href="structsparse__mapping_1_1SparseMap.html#a3b93c70c4223211800d8d5475f200f19">sparse_mapping::SparseMap::ApplyTransform</a></div><div class="ttdeci">void ApplyTransform(Eigen::Affine3d const &amp;T)</div><div class="ttdef"><b>Definition:</b> sparse_map.h:235</div></div>
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
<script type="text/javascript" src="/astrobee/doc_version_select.js"></script>
</body>
</html>
