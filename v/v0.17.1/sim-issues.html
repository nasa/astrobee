<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NASA Astrobee Robot Software: Common Simulation Issues</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.png" type="image/png" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="freeflyer.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td id="projectlogo"><img alt="Logo" src="astrobee-logo.png" height="100"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NASA Astrobee Robot Software
   &#160;<span id="projectnumber">0.17.1</span>
   </div>
   <div id="projectbrief">Flight software for the Astrobee robots operating inside the International Space Station.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('sim-issues.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Common Simulation Issues </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md557"></a>
The program 'roslaunch/rosrun' is currently not installed</h2>
<p>This usually happens when the environment has not been setup. Please see the 'Setting up your Environment' section in <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a>.</p>
<h2><a class="anchor" id="autotoc_md558"></a>
[Sim.launch] is neither a launch file in package [astrobee] ...</h2>
<p>This usually happens when the environment has not been setup. Please see the 'Setting up your Environmant' section in <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a>.</p>
<h2><a class="anchor" id="autotoc_md559"></a>
Rospack Error Finding Package</h2>
<p>This usually happens when the environment has not been setup. Please see the 'Setting up your Environment' section in <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a>.</p>
<h2><a class="anchor" id="autotoc_md560"></a>
Issues Starting up the Simulator</h2>
<p>There is a small chance that you will have issues when starting up the simulator. This mainly happens in computers with less computing power. If you are experiencing issues, try launching the world and Astrobee seperately. To do this, you will need to open 2 terminals. Please make sure you setup your environment in both terminals (see the 'Setting up your environment' section in <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a>). In the first terminal, run: </p><pre class="fragment">roslaunch astrobee sim.launch default_robot:=false rviz:=true
</pre><p>After everything in the first terminal starts up, in the second terminal, run: </p><pre class="fragment">roslaunch astrobee spawn.launch dds:=false robot:=sim_pub
</pre><p><em>Note: If you have the dds ros bridge compiled or installed, please omit the dds and robot flags.</em></p>
<p>If the robot body doesn't show up in RVIZ, please see the <a href="#robot-body-does-not-show-up-in-RVIZ">Robot Body Doesn't Show up in RVIZ</a> section on how to fix this.</p>
<p>If this doesn't fix the problem, you may need to slow down the simulation to a speed that your computer can handle. Please see the <a href="#tolerance-violated-errors">Tolerance Violated Errors</a> section.</p>
<h2><a class="anchor" id="autotoc_md561"></a>
Robot Body Does Not Show up in RVIZ</h2>
<p>If you end up having to launch the world and Astrobee separately, there is a chance that the robot body will not show up in RVIZ. To fix this, you can toggle the robot. To do this, please find the robot with the namespace you are using in the <code>Displays</code> section of RVIZ (bottom left corner) and click the checkbox located to the right twice (first to turn it off, then to turn it back on). If you didn't specify a namespace, the namespace is the forward slash character(/) and it can be found in the Debug section. It should have a red circle with a white rectangle in the circle in front of the forward slash and the forward slash should be red but this will go away after toggling it.</p>
<h2><a class="anchor" id="autotoc_md562"></a>
No Image message in RVIZ</h2>
<p>This is not an error in our system. Please see the 'Images' section in <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a> for more information.</p>
<h2><a class="anchor" id="autotoc_md563"></a>
Heartbeat Fault Detected</h2>
<h3><a class="anchor" id="autotoc_md564"></a>
DDS ROS Bridge</h3>
<p>More than likely this is because the dds ros bridge is not running. If so, please set the robot flag to sim_pub. If you have the dds ros bridge compiling, you can set the dds flag to true. If you want to use a specific robot instead of sim_pub, you will need to add the dds ros bridge node to the list of nodes not running in the robot config. For example, if you are simulating the robot <em>bumble</em>, you must open the LUA config file <em>astrobee/config/robots/bumble.config</em>, and add the node name so that it looks something like this </p><pre class="fragment">node_not_running = {"dds_ros_bridge"}
</pre><h3><a class="anchor" id="autotoc_md565"></a>
Multiple Heartbeat Failures</h3>
<p>This is mostly likely due to a performance issue. If running in a virtual machine, please make sure that it has access to your graphics card. If you have sped up the simulation and are running one or more GUIs, the outgoing heartbeat queue may be too small for the number of messages that must be delivered. You can fix this error by increasing the value of variable "heartbeat_queue_size" in the robot config. For example, if you are simulating the default simulation robot, you must open the LUA config file <em>astrobee/config/robots/sim.config</em>, and increase the value of this line: </p><pre class="fragment">heartbeat_queue_size = &lt;x&gt;
</pre><h2><a class="anchor" id="autotoc_md566"></a>
Command Fails due to Robot State</h2>
<p>Astrobee only excepts a subset of commands in each operating and mobility state. If you are using GDS, the mobility and operating states will be displayed in a health section/subtab at the top left corner of most of the main tabs. If you are using the teleop tool, please see the 'Get State' section in <a class="el" href="teleop.html">Teleoperation Tool Instructions</a>.</p>
<p>A general rule of thumb is Astrobee will not allow mobility commands or commands that set mobility properties when executing a mobility command. For instance, Astrobee will reject a move command when it is executing an undock command and it will reject a set operating limits command when executing a move command. In these instances, you can either wait for the command to complete or issue a stop command which cancels the mobility command being executed.</p>
<p>Futher, Astrobee accepts a limited set of commands when in the fault operating state. If you are using the teleop tool, please see the 'Get Faults' section of the <a class="el" href="teleop.html">Teleoperation Tool Instructions</a> to get the list of occurring faults. If you are using GDS, please navigate to the 'Engineering' tab. The faults should be listed in the bottom left corner. Most times a flight software/simulator restart will get rid of the faults. However, if you are repeatedly getting heartbeat faults, please see the <a href="#heartbeat-fault-detected">Heartbeat Fault Detected</a> section.</p>
<h2><a class="anchor" id="autotoc_md567"></a>
Tolerance Violated Errors</h2>
<p>Most of the time tolerance violated errors occur due to computer performance. To see if this is the case, please run <em>gz stats</em> in a terminal that has its environment setup while the simulator is running. If the factor doesn't roughly match the speed you are running the simulator at, you will have to reduce the speed of the simulator. Please see the 'speed' section in <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a> on how to change the simulator speed. In some cases, this means you will have to run the simulator at a speed slower than real time.</p>
<h2><a class="anchor" id="autotoc_md568"></a>
Keep in Zone Violation</h2>
<p>If you get a keep in zone violation failure when trying to move, please make sure the position you are trying to get to is in the world Astrobee is operating in. For reference, the point (0, 0, -0.67) is in the middle of the granite table in the granite world but it is not inside the ISS in the ISS world. If you are using the teleop tool, please see the 'Get Position' section in <a class="el" href="teleop.html">Teleoperation Tool Instructions</a> to get the current positon of the robot. If you are using GDS, you can get the current position by navigating to the 'Teleoperate' tab and clicking on the 'Snap Preview to Bee' buttonb. This will change the manual inputs to match the current position of Astrobee.</p>
<h2><a class="anchor" id="autotoc_md569"></a>
Unable to Plan a Segment</h2>
<p>The only time we have seen this happen is when the operating limits are not set correctly. Please make sure the operating limits are within Astrobee's capabilities. A flight software/simulator restart will reset the operating limits back to the defaults.</p>
<h2><a class="anchor" id="autotoc_md570"></a>
Couldn't Configure the Mobility Node</h2>
<p>This error usually occurs when an operator issues a move command before the flight software has finished starting up. Please wait a little longer after starting the simulator before trying to issue a move command.</p>
<h2><a class="anchor" id="autotoc_md571"></a>
Could Not Query the Pose of Robot</h2>
<p>This error usually occurs when an operator issues a move command before the flight software has finished starting up. Please wait a little longer after starting the simulator before trying to issue a command.</p>
<h2><a class="anchor" id="autotoc_md572"></a>
Dock Action Server Not Connected</h2>
<p>This error usually occurs when an operator issues an undock command before the flight software has finished starting up. Please wait a little longer after starting the simulator before trying to issue a command.</p>
<h2><a class="anchor" id="autotoc_md573"></a>
GDS Node - Process has Died</h2>
<p>This error occurs if the gds flag was set to true but the Astrobee launch GDS script is unable to find and start GDS. Please ensure that you have GDS and that you have followed the GDS setup instructions in section 'Ground Data System' of <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a>.</p>
<h2><a class="anchor" id="autotoc_md574"></a>
The Robot is Spinning, Flying Higher Than the World, or Jumping Around Erratically</h2>
<p>To fix any of these issues, please try to reset the ekf first. If that doesn't work, try initializing the bias. If you are using the teleop tool, please see the 'Reset Ekf' and 'Reset Bias' sections in <a class="el" href="teleop.html">Teleoperation Tool Instructions</a> on how to do this. If you are using GDS, please navigate to the 'Engineering' tab. The 'Reset EKF' and 'Initialize Bias' buttons should be in the top right corner.</p>
<h3><a class="anchor" id="autotoc_md575"></a>
Teleop Tool Reports No Publisher for Acks Topic</h3>
<p>This issue occurs when a namespace is used for Astrobee but the namespace wasn't provided to the teleop tool or the namespace provided doesn't match Astrobee's namespace. Please check the namespace of Astrobee and make sure it matches the namespace provided to the teleop tool. Remember, Astrobee namespaces should not be capitialized.</p>
<h3><a class="anchor" id="autotoc_md576"></a>
Bumble not in repository</h3>
<p>This error only occurs when running the simulator in a native linux machine instead of a virtual machine. To get rid of it, you will have to open the astrobee/config/communications/dds/RAPID_QOS_PROFILES.xml file and remove ip address '128.102.*' from line 118.</p>
<h2><a class="anchor" id="autotoc_md577"></a>
Gazebo shows up black in VM Ubuntu 20.04</h2>
<p>This is a known issue not specific to our project reported <a href="https://forum.parallels.com/threads/black-screen-with-3d-acceleration-enabled-for-gazebo-and-rviz-robotic.355825/">here</a>. The solution is to turn off 3D acceleration on the VM settings. Note that otherwise the simulation will still work and the robot is capable of moving, but all scicam data imagery will show up black. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
<script type="text/javascript" src="/astrobee/doc_version_select.js"></script>
</body>
</html>
