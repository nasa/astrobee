<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NASA Astrobee Robot Software: Tools used for FSW documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.png" type="image/png" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="freeflyer.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td id="projectlogo"><img alt="Logo" src="astrobee-logo.png" height="100"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NASA Astrobee Robot Software
   &#160;<span id="projectnumber">0.17.0</span>
   </div>
   <div id="projectbrief">Flight software for the Astrobee robots operating inside the International Space Station.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('doc.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Tools used for FSW documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md103"></a>
Code documentation</h2>
<p>Code should be documented using doxygen.</p>
<p><em>Add here an explanation of the overall structure and how to create subsystem pages (or just provide a default template).</em></p>
<h2><a class="anchor" id="autotoc_md104"></a>
UML diagraming</h2>
<p>Astrobee UML diagrams are created using <a href="http://plantuml.com/">plantuml</a> that transform text files into beautiful UML 2 compliant diagrams.</p>
<p>Specific notations used in the diagrams to represent ROS communication schemes is described in: <a href="doc/diagrams/notations.png">Astrobee UML Notations</a></p>
<p>Despite the ads overloaded website, plantuml is free and <a href="https://github.com/plantuml/plantuml">open source</a>. The plantuml <a href="http://plantuml.com/PlantUML_Language_Reference_Guide.pdf">Reference Guide</a> walks to all the diagrams types.</p>
<p>Plantuml relies on <a href="http://www.graphviz.org/">Graphviz</a> that should be already installed since ROS is also using this tool to render runtime node/topic graphs. There are many ways to write/generate plantuml diagrams: <a href="http://plantuml.com/running">http://plantuml.com/running</a>. Choose the integration that best suit you, but vim + command line java works perfectly.</p>
<p>Note: some diagrams are not generated correctly when using graphviz 2.40 (layout stretched vertically). So for now please use graphviz 2.38.</p>
<p>Note: to re-active the 2.38 that keep being updated on Mac: </p><pre class="fragment">sudo port activate graphviz @2.38.0_3+pangocairo
</pre><p>To generate the diagrams from the <code>doc\diagrams</code> directory: </p><div class="fragment"><div class="line">make</div>
<div class="line"># or to get PNG versions:</div>
<div class="line">make png</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md105"></a>
ROS Messages, Services and Actions</h2>
<p>Our toolchain incudes Doxygen python filters to interpret <code>*.msg</code>, <code>*.action</code> and <code>*.srv</code> files. Internally, the filters convert the messages, topics and action files to markdown, and renders them in a hierarchy of Doxygen 'module' pages. So, they will appear in the same structure as the written markdown documentation, and not as classes / structs or other types.</p>
<p>In order for the files to be interpreted correctly, one needs to abide by a couple of simple rules.</p><ol type="1">
<li>All header lines must begin with a '#' comment character. The end of the header is signified by an empty line. All comments following the newline will be treated as leading comments for the first declared variable.</li>
</ol>
<ol type="1">
<li>Any header lines containing the word 'copyright' will be stripped from the documentation. All hashes ans newlines will also be stripped from the documentation. You are therefore discouraged from including any comment that relies on formatting using tabs or spaces.</li>
</ol>
<ol type="1">
<li>You may document a variable above (leading) or in-line (to the right of) it's declaration. However, you cannot do both! An inline comment will mute a leading comment.</li>
</ol>
<h1><a class="anchor" id="autotoc_md106"></a>
ROS Unit Tests</h1>
<p>The ROS test framework (rostest) is build upon the Google test framework. The idea behind a ROS test is that it first launches a collection of ROS nodes, and then starts the unit test, which runs tests against the ROS nodes.</p>
<p>Writing a unit test for a package involves modifying the package's <code>CMakeLists.txt</code> and <code>package.xml</code> files, and writing a collection of test cases. To see an example, have a look in the <code>./tools/visualeyez</code> folder.</p>
<p>To build all ROS tests, use the following: </p><pre class="fragment">make -j6 tests
</pre><p>To execute all ROS tests run the following: </p><pre class="fragment">make -j6 run_tests
</pre><p>Note that by default all ROS console messages (ROS_INFO, ROS_WARN, etc.) called from within the test cases are suppressed. To print all messages, as well as a more comprehensive test result, add the <code>--text</code> argument: </p><div class="fragment"><div class="line">rostest &lt;package&gt; &lt;*.test&gt; --text</div>
</div><!-- fragment --><p>Sometimes you want to debug your unit tests, but it's unclear on which port rostest started the ROS master. A simpler approach is to manually start the ROS master using <code>roscore</code> and then latch the rostest to this master with the <code>reuse-master</code> argument as follows: </p><div class="fragment"><div class="line">rostest &lt;package&gt; &lt;*.test&gt; --reuse-master</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
<script type="text/javascript" src="/astrobee/doc_version_select.js"></script>
</body>
</html>
