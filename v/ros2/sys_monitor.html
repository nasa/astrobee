<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NASA Astrobee Robot Software: System Monitor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.png" type="image/png" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="freeflyer.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td id="projectlogo"><img alt="Logo" src="astrobee-logo.png" height="100"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NASA Astrobee Robot Software
   &#160;<span id="projectnumber">0.17.0</span>
   </div>
   <div id="projectbrief">Flight software for the Astrobee robots operating inside the International Space Station.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('sys_monitor.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">System Monitor </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The system monitor is responsible for triggering fault responses and notifying the ground of all the faults occurring on the robot. The system monitor is only responsible for detecting heartbeat faults. All other faults should be detected by the nodes in the system.</p>
<h1><a class="anchor" id="autotoc_md494"></a>
Startup</h1>
<p>To be written</p>
<h1><a class="anchor" id="autotoc_md495"></a>
Fault responses</h1>
<p>All fault responses are astrobee commands. Each fault id will have a fault response which can be found in a fault table that the system monitor reads in upon startup. See the Fault Table section for more information.</p>
<h1><a class="anchor" id="autotoc_md496"></a>
Triggering Faults</h1>
<p>Freeflyer nodelets have the ability to assert faults and will do so upon detecting of a fault. By asserting a fault, the fault will be added to a list of faults in the freeflyer nodelet's heartbeat. The heartbeat will be sent to the system monitor and the system monitor will trigger the fault response of the asserted fault. The system monitor will also add the fault to its state which is sent to the ground.</p>
<h1><a class="anchor" id="autotoc_md497"></a>
Clear faults</h1>
<p>To clear faults, a freeflyer nodelet can either use the clear fault or clear all faults functions. These function will publish a need heartbeat message with the fault removed. The system monitor will detect the faults that have been removed and remove them from its state.</p>
<h1><a class="anchor" id="autotoc_md498"></a>
Blocking faults</h1>
<p>Nodes that directly affect the motion of the robot are able to reject commands if faults are occuring. Nodes that don't directly affect the motion need the system monitor to express when a fault has occurred that affects the motion of the robot. These faults are categorized as blocking faults and change the system monitor's state from functional or fault to blocked. Executive will monitor the system monitor's state and transition into the fault operating state if the state is blocked.</p>
<h1><a class="anchor" id="autotoc_md499"></a>
Fault table</h1>
<p>The system monitor will read in a table on startup that contains all the information needed to detect heartbeat faults and trigger all faults. The table can be found in astrobee/config/sys_monitor.config. The table is organized by subsystem and then by node making it easy to find and add faults corresponding to a node.</p>
<h2><a class="anchor" id="autotoc_md500"></a>
Entries</h2>
<p>Each entry must contain a fault id, whether the fault is a warning, whether the fault is blocking, a response, and a description. Heartbeat detection information, such as time exepected between heartbeats and the number of misses allowed, will only be specified in heartbeat faults entries.</p>
<h2><a class="anchor" id="autotoc_md501"></a>
Responses</h2>
<p>A lua function named "command" was developed to help a table modifier add or change a response. The first argument is the name of the command and the remaining arguments are the command arguements. Numerical arguments require a second lua function to help express whether the value is an integer, float, double, long, vector or matrix. Please see the configuration file for more information. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
<script type="text/javascript" src="/astrobee/doc_version_select.js"></script>
</body>
</html>
