<!-- HTML header for doxygen 1.9.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NASA Astrobee Robot Software: Teleoperation Tool Instructions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="favicon.png" type="image/png" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="freeflyer.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 70px;">
  <td id="projectlogo"><img alt="Logo" src="astrobee-logo.png" height="100"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NASA Astrobee Robot Software
   &#160;<span id="projectnumber">0.17.0</span>
   </div>
   <div id="projectbrief">Flight software for the Astrobee robots operating inside the International Space Station.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('teleop.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Teleoperation Tool Instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>These instructions assume that you have followed <a class="el" href="install-nonNASA.html">Install for general users</a> or <a class="el" href="install-NASA.html">Install for NASA users</a> and <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a>.</p>
<p>A teleop tool has been added to allow you to issue some commands and get some telemetry from the robot. This should only be used to play with the simulator and get a feel for how Astrobee works. As an external user, we consider you to be a guest sciencist and we expect you to follow the guest science framework we have created. Please see the Guest Science Applications section in the <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a> documentation for more information.</p>
<p>To use the teleop tool, the user must specify what they want to do through flags. This section will take you through the flags the tool offers. Please note, you can only specify one mobility flag at a time. For example, you will not be able to use both the dock flag and the move flag. Also you don't need to use a mobility flag. You can run the teleop tool just to get telemetry. Please make sure the terminal you are using for the tool has its environment setup. For information on how to setup the terminal environment, please see the Setting up your Environment section of the <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a> documentation.</p>
<h2><a class="anchor" id="autotoc_md471"></a>
Basic Usage</h2>
<h3><a class="anchor" id="autotoc_md472"></a>
Dock</h3>
<p>This flag can be used to dock the robot and is considered a mobility flag. To dock, please run the following: </p><pre class="fragment">rosrun executive teleop_tool -dock
</pre><p>By default, the robot will dock in berth 1 (the left berth). If you would like it to dock in the right berth, you will have to use the berth flag. To dock Astrobee in the right berth, please run the following: </p><pre class="fragment">rosrun executive teleop_tool -dock -berth 2
</pre><h3><a class="anchor" id="autotoc_md473"></a>
Move</h3>
<p>This flag can be used to move the robot and is be considered a mobility flag. If you want to move relative to the robot, please use the relative flag. If you want to specify an absolute position, do not specify the relative flag. You should use the pos flag to specify the desired position in cartesian format (X Y Z). You should use the att flag to specify the desired attitude in angle-axis format. You don't need to specify the position if you only want to rotate the robot and you don't need to specify the attitude if you only want to move Astrobee. Please see the following examples for clarity (these examples assume you are using the ISS world):</p>
<p>To move the robot forward 1, right 2 and down 0.5: </p><pre class="fragment">rosrun executive teleop_tool -move -relative -pos "1 2 0.5"
</pre><p>To move the robot back 1: </p><pre class="fragment">rosrun executive teleop_tool -move -relative -pos "-1"
</pre><p>To rotate the robot around Y (axis X=0 Y=1 Z=0) by -1.5 radians: </p><pre class="fragment">rosrun executive teleop_tool -move -att "-1.5 0 1 0"
</pre><p>To move to the middle of the JEM: </p><pre class="fragment">rosrun executive teleop_tool -move -pos "11.25 -6.59"
</pre><p>To move to the dock approach point facing the dock: </p><pre class="fragment">rosrun executive teleop_tool -move -pos "10.34 -9.51 4.49" -att "-3.14 0 0 1"
</pre><h3><a class="anchor" id="autotoc_md474"></a>
Stop</h3>
<p>This flag can be used to stop the robot and is considered a mobility flag. If you are using the teleop tool to move the robot and it isn't running in the background, you will have to run the teleop tool with the stop flag in another terminal whose environment is setup. For information on how to setup the terminal, please see the Setting up your Environment section of the <a class="el" href="running-the-sim.html">Running the Astrobee Simulator</a> documentation. To stop, run: </p><pre class="fragment">rosrun executive teleop_tool -stop
</pre><h3><a class="anchor" id="autotoc_md475"></a>
Undock</h3>
<p>This flag can be used to undock the robot and is considered a mobility flag. To undock, please run the following: </p><pre class="fragment">rosrun executive teleop_tool -undock
</pre><h3><a class="anchor" id="autotoc_md476"></a>
Get Position</h3>
<p>This flag is used to get the robot's current position. To use it, run: </p><pre class="fragment">rosrun executive teleop_tool -get_pose
</pre><h3><a class="anchor" id="autotoc_md477"></a>
Get State</h3>
<p>This flag is used to get the robot's state. This will display the robot's operating and mobility states. If you try to issue a command that is rejected because the robot is not in the right state, you may want to use this flag to figure out what the robot is doing. To use it, run: </p><pre class="fragment">rosrun executive teleop_tool -get_state
</pre><h3><a class="anchor" id="autotoc_md478"></a>
Reset Ekf</h3>
<p>This flag is used to reset the localization. If your Astrobee is spinning or jumping around erraticaly, you should try to reset the ekf. To do this, run: </p><pre class="fragment">rosrun executive teleop_tool -reset_ekf
</pre><h2><a class="anchor" id="autotoc_md479"></a>
Advanced Usage</h2>
<h3><a class="anchor" id="autotoc_md480"></a>
Namespace</h3>
<p>If you used a namespace when launching the robot, you must use a namespace for the teleop tool. If you don't, the program will report that there are no publishers for the ack topic and the program will then exit. For example, to undock the Astrobee named bumble, you would issue the following: </p><pre class="fragment">rosrun executive teleop_tool -ns "bumble" -undock
</pre><p><b>Important</b>: Much like the launch namespace, please DO NOT capitalize the namespace as we don't support this.</p>
<h3><a class="anchor" id="autotoc_md481"></a>
Reset Bias</h3>
<p>This flag is used to reset the bias. To do this, run: </p><pre class="fragment">rosrun executive teleop_tool -reset_bias
</pre><h3><a class="anchor" id="autotoc_md482"></a>
Get Faults</h3>
<p>This flag is used to display the current faults in the system. If you received a heartbeat fault, you may want to check the faults to see if the heartbeat came back (i.e. the heartbeat fault disappeared). To use this flag, run: </p><pre class="fragment">rosrun executive teleop_tool -get_faults
</pre><h3><a class="anchor" id="autotoc_md483"></a>
Set Planner</h3>
<p>This flag is used to set the planner. The flight software currently supports two planners; a trapezoidal and a quadratic program (qp). The default planner is the trapezoidal planner. If you would like to use the qp planner, run: </p><pre class="fragment">rosrun executive teleop_tool -set_planner "qp"
</pre><p>The qp planner has not been tested rigorously and may have some bugs. To switch back to the trapezoidal planner, run: </p><pre class="fragment">rosrun executive teleop_tool -set_planner "trapezoidal"
</pre><h3><a class="anchor" id="autotoc_md484"></a>
Get Planner</h3>
<p>This flag is used to display the current planner. If you want to see the planner being used, please run: </p><pre class="fragment">rosrun executive teleop_tool -get_planner
</pre><h3><a class="anchor" id="autotoc_md485"></a>
Set Check Zones</h3>
<p>This flag is used to tell the robot if it should check the keepin and keepout zones. By default, the robot checks them before performing a motion. If you are having trouble with the keepin/keepout zones in simulation, try turning this off. To turn it off, run: </p><pre class="fragment">rosrun executive teleop_tool -set_check_zones "off"
</pre><p>To turn check zones back on, please run: </p><pre class="fragment">rosrun executive teleop_tool -set_check_zones "on"
</pre><h3><a class="anchor" id="autotoc_md486"></a>
Set Face Forward</h3>
<p>This flag is used to tell the robot to fly in face forward mode. By default, the robot flies in face forward mode meaning the robot will turn towards the point it is navigating to before flying. If face foward mode is turned off, the robot will not turn towards the point it is navigating to or in other words, the robot will fly blind. If there is an object in the robot's path, the robot will collide with it so please use this flag with caution. To turn face forward off, run: </p><pre class="fragment">rosrun executive teleop_tool -set_face_forward "off"
</pre><p>To turn face forward back on, please run: </p><pre class="fragment">rosrun executive teleop_tool -set_face_forward "on"
</pre><h3><a class="anchor" id="autotoc_md487"></a>
Get Face Forward</h3>
<p>This flag is used to display the current state of face forward mode. To see if Astrobee is current flying face forward, please run: </p><pre class="fragment">rosrun executive teleop_tool -get_face_forward
</pre><h3><a class="anchor" id="autotoc_md488"></a>
Set Operating Limits</h3>
<p>This flag is used to set the operating limits. If you set the operating limits incorrectly, Astrobee may be unable to move. If you want to set the operating limits, we recommend looking at the flight modes so you know what the upper/hard limits for the flight modes are. The flight modes can be found in the world config files which can be found in <code>astrobee/config/worlds/</code>. Please note that the mode must match the name of one our flight modes. Also note, there are docking, undocking, perching and unperching flight modes. You DO NOT need to set these modes before you dock, undock, perch, or unperch; the flight software does this for you. If you want to use nominal mode but you want the target velocities and accelerations to be half the hard limits, run: </p><pre class="fragment">rosrun executive teleop_tool -set_op_limits -mode "nominal" -vel 0.1 -accel 0.01 -omega 0.08725 -alpha 0.08725 -collision_distance 0.25
</pre><p>If you want to push astrobee to the max, you can try to use the hard limits for difficult mode. This may not work and may result in tolerance violations when trying to move Astrobee. To do this, run: </p><pre class="fragment">rosrun executive teleop_tool -set_op_limits -mode "difficult" -vel 0.4 -accel 0.0400 -omega 0.5236 -alpha 0.5236 -collision_distance 0.25
</pre><h3><a class="anchor" id="autotoc_md489"></a>
Get Operating Limits</h3>
<p>This flag is used to display the current operating limits. To use it, run: </p><pre class="fragment">rosrun executive teleop_tool -get_op_limits
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.0-->
<!-- start footer part -->
<script type="text/javascript" src="/astrobee/doc_version_select.js"></script>
</body>
</html>
